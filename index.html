<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Spotify-style Offline Player</title>

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;
  background:#000;
  color:#fff;
  overflow:hidden;
}
.bg-blur{
  position:fixed;
  inset:0;
  background-size:cover;
  background-position:center;
  filter:blur(45px);
  transform:scale(1.3);
  z-index:-1;
}
.player{
  max-width:420px;
  margin:40px auto;
  background:#121212cc;
  border-radius:20px;
  padding:20px;
}
.cover{
  width:100%;
  aspect-ratio:1/1;
  border-radius:14px;
  object-fit:cover;
}
h2{margin:14px 0 4px}
p{margin:0;color:#bbb}
.progress{
  width:100%;
  height:6px;
  background:#333;
  border-radius:4px;
  margin:14px 0;
  cursor:pointer;
}
.progress-bar{
  height:100%;
  width:0%;
  background:#1db954;
  border-radius:4px;
}
.time{
  display:flex;
  justify-content:space-between;
  font-size:12px;
  color:#aaa;
}
.controls{
  display:flex;
  justify-content:center;
  gap:20px;
  margin:18px 0;
}
button{
  width:56px;
  height:56px;
  border-radius:50%;
  border:none;
  font-size:20px;
  background:#1db954;
  color:#000;
}
button.small{
  width:44px;
  height:44px;
  background:#333;
  color:#fff;
}
.playlist{
  margin-top:14px;
}
.track{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px;
  border-radius:10px;
  cursor:pointer;
}
.track img{
  width:48px;
  height:48px;
  border-radius:8px;
  object-fit:cover;
}
.track.active{background:#1db95433}
</style>
</head>

<body>

<div class="bg-blur"></div>

<div class="player">
  <img class="cover" />
  <h2 id="title"></h2>
  <p id="artist"></p>

  <div class="progress" id="progress">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div class="time">
    <span id="current">0:00</span>
    <span id="duration">0:00</span>
  </div>

  <div class="controls">
    <button class="small" id="shuffle">üîÄ</button>
    <button class="small" id="prev">‚èÆ</button>
    <button id="play">‚ñ∂</button>
    <button class="small" id="next">‚è≠</button>
  </div>

  <div class="playlist" id="playlist"></div>
</div>

<audio id="audio"></audio>

<script>
const tracks = [
  {
    title:"About You",
    artist:"The 1975",
    src:"aboutyou.mp3",
    cover:"cover1.jpg"
  },
  {
    title:"Happiness",
    artist:"Rex Orange County",
    src:"happiness.mp3",
    cover:"cover2.jpg"
  }
];

let index = 0;
let isPlaying = false;
let shuffle = false;

const audio = document.getElementById("audio");
const cover = document.querySelector(".cover");
const bg = document.querySelector(".bg-blur");
const title = document.getElementById("title");
const artist = document.getElementById("artist");
const playBtn = document.getElementById("play");
const progressBar = document.getElementById("progressBar");
const current = document.getElementById("current");
const duration = document.getElementById("duration");
const playlist = document.getElementById("playlist");

function loadTrack(i){
  const t = tracks[i];
  audio.src = t.src;
  cover.src = t.cover;
  bg.style.backgroundImage = `url(${t.cover})`; // üîë BLUR IKUT LAGU
  title.textContent = t.title;
  artist.textContent = t.artist;
  document.querySelectorAll(".track").forEach((el,idx)=>{
    el.classList.toggle("active", idx===i);
  });
}

function play(){
  audio.play();
  isPlaying = true;
  playBtn.textContent="‚è∏";
}
function pause(){
  audio.pause();
  isPlaying = false;
  playBtn.textContent="‚ñ∂";
}

playBtn.onclick = ()=> isPlaying ? pause() : play();

document.getElementById("next").onclick = ()=>{
  index = shuffle ? Math.floor(Math.random()*tracks.length) : (index+1)%tracks.length;
  loadTrack(index); play();
};
document.getElementById("prev").onclick = ()=>{
  index = (index-1+tracks.length)%tracks.length;
  loadTrack(index); play();
};
document.getElementById("shuffle").onclick = ()=>{
  shuffle = !shuffle;
  document.getElementById("shuffle").style.background = shuffle ? "#1db954" : "#333";
};

audio.ontimeupdate = ()=>{
  progressBar.style.width = (audio.currentTime/audio.duration)*100+"%";
  current.textContent = format(audio.currentTime);
  duration.textContent = format(audio.duration);
};
document.getElementById("progress").onclick = e=>{
  const p = e.offsetX/e.target.offsetWidth;
  audio.currentTime = p*audio.duration;
};

function format(t){
  if(!t) return "0:00";
  const m = Math.floor(t/60);
  const s = Math.floor(t%60).toString().padStart(2,"0");
  return `${m}:${s}`;
}

tracks.forEach((t,i)=>{
  const div=document.createElement("div");
  div.className="track";
  div.innerHTML=`<img src="${t.cover}"><div><b>${t.title}</b><br><small>${t.artist}</small></div>`;
  div.onclick=()=>{index=i;loadTrack(i);play()};
  playlist.appendChild(div);
});

loadTrack(index);
</script>
</body>
</html>
