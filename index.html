<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Player</title>

<style>
* {
  box-sizing: border-box;
  font-family: Arial, sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  overflow: hidden;
}

/* BLUR BACKGROUND */
.bg-blur {
  position: fixed;
  inset: 0;
  background-size: cover;
  background-position: center;
  filter: blur(45px);
  transform: scale(1.2);
  z-index: -2;
}

/* DARK OVERLAY */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  z-index: -1;
}

.player {
  width: 330px;
  background: #121212;
  border-radius: 18px;
  padding: 16px;
}

/* COVER */
.cover {
  width: 100%;
  border-radius: 14px;
  margin-bottom: 14px;
}

/* TEXT */
h2 {
  margin: 0;
  font-size: 20px;
}

p {
  margin: 4px 0 12px;
  color: #b3b3b3;
}

/* PROGRESS */
.progress-container {
  width: 100%;
  height: 6px;
  background: #333;
  border-radius: 3px;
  cursor: pointer;
}

.progress {
  height: 100%;
  width: 0%;
  background: #1db954;
  border-radius: 3px;
}

.time {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  margin-top: 4px;
  color: #ccc;
}

/* CONTROLS */
.controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 16px 0;
}

button {
  border: none;
  background: #1db954;
  color: black;
  width: 52px;
  height: 52px;
  border-radius: 50%;
  font-size: 18px;
  cursor: pointer;
}

.shuffle {
  background: #ff9800;
}

/* PLAYLIST */
.playlist {
  margin-top: 12px;
}

.track {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px;
  border-radius: 8px;
  cursor: pointer;
}

.track img {
  width: 44px;
  height: 44px;
  border-radius: 6px;
}

.track.active {
  background: #1db954;
  color: black;
}
</style>
</head>

<body>

<div class="bg-blur"></div>
<div class="overlay"></div>

<div class="player">
  <img class="cover" id="cover">
  <h2 id="title"></h2>
  <p id="artist"></p>

  <div class="progress-container" id="progressContainer">
    <div class="progress" id="progress"></div>
  </div>

  <div class="time">
    <span id="current">0:00</span>
    <span id="duration">0:00</span>
  </div>

  <div class="controls">
    <button class="shuffle" id="shuffle">üîÄ</button>
    <button id="prev">‚èÆ</button>
    <button id="play">‚ñ∂</button>
    <button id="next">‚è≠</button>
  </div>

  <div class="playlist" id="playlist"></div>
</div>

<audio id="audio"></audio>

<script>
const tracks = [
  {
    title: "About You",
    artist: "The 1975",
    src: "aboutyou.mp3",
    cover: "cover1.jpg"
  },
  {
    title: "Happiness",
    artist: "Rex Orange County",
    src: "happiness.mp3",
    cover: "cover2.jpg"
  }
];

let index = 0;
let isPlaying = false;

const audio = document.getElementById("audio");
const cover = document.getElementById("cover");
const title = document.getElementById("title");
const artist = document.getElementById("artist");
const playBtn = document.getElementById("play");
const prevBtn = document.getElementById("prev");
const nextBtn = document.getElementById("next");
const shuffleBtn = document.getElementById("shuffle");
const progress = document.getElementById("progress");
const progressContainer = document.getElementById("progressContainer");
const currentTimeEl = document.getElementById("current");
const durationEl = document.getElementById("duration");
const playlistEl = document.getElementById("playlist");
const bgBlur = document.querySelector(".bg-blur");

function loadTrack(i) {
  const t = tracks[i];
  audio.src = t.src;
  cover.src = t.cover;
  bgBlur.style.backgroundImage = `url(${t.cover})`;
  title.textContent = t.title;
  artist.textContent = t.artist;
  updatePlaylist();
}

function playPause() {
  if (isPlaying) {
    audio.pause();
    playBtn.textContent = "‚ñ∂";
  } else {
    audio.play();
    playBtn.textContent = "‚è∏";
  }
  isPlaying = !isPlaying;
}

function nextTrack() {
  index = (index + 1) % tracks.length;
  loadTrack(index);
  audio.play();
  isPlaying = true;
  playBtn.textContent = "‚è∏";
}

function prevTrack() {
  index = (index - 1 + tracks.length) % tracks.length;
  loadTrack(index);
  audio.play();
  isPlaying = true;
  playBtn.textContent = "‚è∏";
}

shuffleBtn.onclick = () => {
  index = Math.floor(Math.random() * tracks.length);
  loadTrack(index);
  audio.play();
  isPlaying = true;
  playBtn.textContent = "‚è∏";
};

audio.ontimeupdate = () => {
  const percent = (audio.currentTime / audio.duration) * 100;
  progress.style.width = percent + "%";

  currentTimeEl.textContent = format(audio.currentTime);
  durationEl.textContent = format(audio.duration);
};

progressContainer.onclick = (e) => {
  const width = progressContainer.clientWidth;
  audio.currentTime = (e.offsetX / width) * audio.duration;
};

audio.onended = nextTrack;

function format(sec) {
  if (!sec) return "0:00";
  const m = Math.floor(sec / 60);
  const s = Math.floor(sec % 60).toString().padStart(2,"0");
  return `${m}:${s}`;
}

function updatePlaylist() {
  playlistEl.innerHTML = "";
  tracks.forEach((t, i) => {
    const div = document.createElement("div");
    div.className = "track" + (i === index ? " active" : "");
    div.innerHTML = `<img src="${t.cover}"><div>${t.title}<br><small>${t.artist}</small></div>`;
    div.onclick = () => {
      index = i;
      loadTrack(index);
      audio.play();
      isPlaying = true;
      playBtn.textContent = "‚è∏";
    };
    playlistEl.appendChild(div);
  });
}

playBtn.onclick = playPause;
nextBtn.onclick = nextTrack;
prevBtn.onclick = prevTrack;

loadTrack(index);
</script>

</body>
</html>
